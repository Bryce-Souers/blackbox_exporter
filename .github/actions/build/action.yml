---
name: Build
description: Build action
inputs:
  thread:
    description: Current thread
    required: true
    default: "3"
  parallelism:
    description: Number of builds to do in parallel
    default: "3"
  promu_opts:
    description: Options to pass to promu
runs:
  using: composite
  steps:
    - run: make promu
      shell: bash
    - run: promu crossbuild -v --parallelism ${{ inputs.parallelism }} --parallelism-thread ${{ inputs.thread }} ${{ inputs.promu_opts }}
      shell: bash
    - uses: actions/upload-artifact@v4.5.0
      with:
        path: |
          .build
